<!doctype html><html lang=es class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Retos realizados a partir de una placa tipo Arduino UNO y la shield Imagina TdR-STEAM V2.0 y alguna teoría de la necesaria"><meta name=author content="Federico Coca"><link href=https://fgcoca.github.io/TdR-STEAM-and_UNO/R14/ rel=canonical><link rel=icon href=../img/favicon.png><meta name=generator content="mkdocs-1.2.3, mkdocs-material-8.1.9"><title>Reto-14. Bluetooth - Retos con TdR-STEAM y keyestudio UNO</title><link rel=stylesheet href=../assets/stylesheets/main.2b4465f4.min.css><link rel=stylesheet href=../assets/stylesheets/palette.e6a45f82.min.css><meta name=theme-color content=#02a6f2><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><script>__md_scope=new URL("..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme data-md-color-primary=light-blue data-md-color-accent=deep-purple> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#reto-14-bluetooth class=md-skip> Saltar a contenido </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Cabecera> <a href=.. title="Retos con TdR-STEAM y keyestudio UNO" class="md-header__button md-logo" aria-label="Retos con TdR-STEAM y keyestudio UNO" data-md-component=logo> <img src=../img/favicon.png alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Retos con TdR-STEAM y keyestudio UNO </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Reto-14. Bluetooth </span> </div> </div> </div> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Búsqueda placeholder=Búsqueda autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" aria-label=Limpiar tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Inicializando búsqueda </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/fgcoca/TdR-STEAM-and_UNO title="Ir al repositorio" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> fgcoca/TdR-STEAM-and_UNO </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navegación data-md-level=0> <label class=md-nav__title for=__drawer> <a href=.. title="Retos con TdR-STEAM y keyestudio UNO" class="md-nav__button md-logo" aria-label="Retos con TdR-STEAM y keyestudio UNO" data-md-component=logo> <img src=../img/favicon.png alt=logo> </a> Retos con TdR-STEAM y keyestudio UNO </label> <div class=md-nav__source> <a href=https://github.com/fgcoca/TdR-STEAM-and_UNO title="Ir al repositorio" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> fgcoca/TdR-STEAM-and_UNO </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=.. class=md-nav__link> Introducción </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2 type=checkbox id=__nav_2> <label class=md-nav__link for=__nav_2> Algo de teoría <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Algo de teoría" data-md-level=1> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Algo de teoría </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../soft/ class=md-nav__link> Software </a> </li> <li class=md-nav__item> <a href=../hard/ class=md-nav__link> Hardware TdR STEAM </a> </li> <li class=md-nav__item> <a href=../3D/ class=md-nav__link> Elementos impresión 3D </a> </li> <li class=md-nav__item> <a href=../operadores/ class=md-nav__link> Operadores en programación C++ </a> </li> <li class=md-nav__item> <a href=../IoT_basico/ class=md-nav__link> Teoría básica de IoT </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3 type=checkbox id=__nav_3 checked> <label class=md-nav__link for=__nav_3> Colección de retos y actividades <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Colección de retos y actividades" data-md-level=1> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Colección de retos y actividades </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../R01/ class=md-nav__link> Reto-01. LED </a> </li> <li class=md-nav__item> <a href=../R02/ class=md-nav__link> Reto-02. LEDs rojo y azul </a> </li> <li class=md-nav__item> <a href=../R03/ class=md-nav__link> Reto-03. LED RGB </a> </li> <li class=md-nav__item> <a href=../R04/ class=md-nav__link> Reto-04. Zumbador </a> </li> <li class=md-nav__item> <a href=../R05/ class=md-nav__link> Reto-05. Pulsadores </a> </li> <li class=md-nav__item> <a href=../R06/ class=md-nav__link> Reto-06. Potenciómetro </a> </li> <li class=md-nav__item> <a href=../R07/ class=md-nav__link> Reto-07. Fotorresistencia LDR </a> </li> <li class=md-nav__item> <a href=../R08/ class=md-nav__link> Reto-08. Sensor de temperatura LM35 </a> </li> <li class=md-nav__item> <a href=../R09/ class=md-nav__link> Reto-09. Sensor de temperatura y humedad DHT-11 </a> </li> <li class=md-nav__item> <a href=../R10/ class=md-nav__link> Reto-10. Emisor y receptor de infrarrojos </a> </li> <li class=md-nav__item> <a href=../R11/ class=md-nav__link> Reto-11. Puerto de expansión I2C. La LCD de 2x16 </a> </li> <li class=md-nav__item> <a href=../R12/ class=md-nav__link> Reto-12. Sensor de sonido o micrófono </a> </li> <li class=md-nav__item> <a href=../R13/ class=md-nav__link> Reto-13. Termohigrómetro </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> Reto-14. Bluetooth <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> Reto-14. Bluetooth </a> <nav class="md-nav md-nav--secondary" aria-label="Tabla de contenidos"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Tabla de contenidos </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#enunciado class=md-nav__link> Enunciado </a> </li> <li class=md-nav__item> <a href=#teoria class=md-nav__link> Teoría </a> <nav class=md-nav aria-label=Teoría> <ul class=md-nav__list> <li class=md-nav__item> <a href=#modulo-bluetooth class=md-nav__link> Módulo Bluetooth </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#en-la-tdr-steam class=md-nav__link> En la TdR STEAM </a> </li> <li class=md-nav__item> <a href=#programando-el-reto class=md-nav__link> Programando el reto </a> <nav class=md-nav aria-label="Programando el reto"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#programa-en-appinventor2 class=md-nav__link> Programa en AppInventor2 </a> </li> <li class=md-nav__item> <a href=#programa-en-arduinoblocks class=md-nav__link> Programa en ArduinoBlocks </a> </li> <li class=md-nav__item> <a href=#proceso-de-prueba class=md-nav__link> Proceso de prueba </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#actividad-propuesta class=md-nav__link> Actividad propuesta </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../R15/ class=md-nav__link> Reto-15. IoT (WiFi) </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../retos/ class=md-nav__link> Todos los programas de los retos </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5 type=checkbox id=__nav_5> <label class=md-nav__link for=__nav_5> Miscelanea <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Miscelanea data-md-level=1> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> Miscelanea </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../Miscelanea/about/ class=md-nav__link> Autor </a> </li> <li class=md-nav__item> <a href=../Miscelanea/lic/ class=md-nav__link> Licencias </a> </li> <li class=md-nav__item> <a href=../Miscelanea/webgrafia/ class=md-nav__link> Webgrafia/Bibliografía </a> </li> <li class=md-nav__item> <a href=../Miscelanea/soft/ class=md-nav__link> Software utilizado </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Tabla de contenidos"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Tabla de contenidos </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#enunciado class=md-nav__link> Enunciado </a> </li> <li class=md-nav__item> <a href=#teoria class=md-nav__link> Teoría </a> <nav class=md-nav aria-label=Teoría> <ul class=md-nav__list> <li class=md-nav__item> <a href=#modulo-bluetooth class=md-nav__link> Módulo Bluetooth </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#en-la-tdr-steam class=md-nav__link> En la TdR STEAM </a> </li> <li class=md-nav__item> <a href=#programando-el-reto class=md-nav__link> Programando el reto </a> <nav class=md-nav aria-label="Programando el reto"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#programa-en-appinventor2 class=md-nav__link> Programa en AppInventor2 </a> </li> <li class=md-nav__item> <a href=#programa-en-arduinoblocks class=md-nav__link> Programa en ArduinoBlocks </a> </li> <li class=md-nav__item> <a href=#proceso-de-prueba class=md-nav__link> Proceso de prueba </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#actividad-propuesta class=md-nav__link> Actividad propuesta </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=reto-14-bluetooth><font color=#8B008B>Reto-14. Bluetooth</font><a class=headerlink href=#reto-14-bluetooth title="Permanent link">&para;</a></h1> <h2 id=enunciado><font color=#007575>Enunciado</font><a class=headerlink href=#enunciado title="Permanent link">&para;</a></h2> <p>Crear una aplicación para comunicarnos por Bluetooth con la placa TdR STEAM desde nuestro móvil. </p> <h2 id=teoria><font color=#007575>Teoría</font><a class=headerlink href=#teoria title="Permanent link">&para;</a></h2> <p>En la placa TDR STEAM tenemos disponible un puerto de comunicaciones serie que nos permite conectar módulos Bluetooth o Wifi. Este puerto va equipado de un interruptor para poder conectarlo o desconectarlo ya que utiliza los mismos pines Rx/Tx que se utilizan para comunicarse con el ordenador. En la imagen siguiente vemos el puerto y el interruptor y la conexión que se realiza según la posición del interruptor.</p> <p><center></p> <table> <thead> <tr> <th align=center>Puerto BT y WiFi y posición interruptor</th> </tr> </thead> <tbody> <tr> <td align=center><img alt="Puerto BT y WiFi y posición interruptor" src=../img/img/Reto-14/puerto-interruptor.png></td> </tr> </tbody> </table> <p></center></p> <h3 id=modulo-bluetooth><font color=#AA0000>Módulo Bluetooth</font><a class=headerlink href=#modulo-bluetooth title="Permanent link">&para;</a></h3> <p>Bluetooth es una especificación industrial para Redes Inalámbricas de Área Personal (WPAN) que posibilita la transmisión de voz y datos entre diferentes dispositivos mediante un enlace por radiofrecuencia en la banda ISM de los 2.4 GHz. Los principales objetivos que se pretenden conseguir con esta norma son:</p> <ul> <li>Facilitar las comunicaciones entre equipos móviles.</li> <li>Eliminar los cables y conectores entre estos.</li> <li>Ofrecer la posibilidad de crear pequeñas redes inalámbricas y facilitar la sincronización de datos entre equipos personales.</li> </ul> <p>Se denomina Bluetooth al protocolo de comunicaciones diseñado especialmente para dispositivos de bajo consumo, que requieren corto alcance de emisión y basados en transceptores (dispositivos que cuentan con transmisor y receptor compartiendo parte de la circuitería) de bajo costo.</p> <p>El hardware que compone el dispositivo Bluetooth está compuesto por dos partes:</p> <ul> <li>un dispositivo de radio, encargado de modular y transmitir la señal.</li> <li>un controlador digital, compuesto por una CPU, un procesador de señales digitales (DSP – Digital Signal Processor) llamado Link Controller (o controlador de Enlace) y de las interfaces con el dispositivo anfitrión.</li> </ul> <p>Existe un procedimiento definido que se llama Pairing (o emparejamiento) que vincula a dos dispositivos Bluetooth. Cuando vinculamos dos dispositivos Bluetooth, se inicia un proceso en el que ellos se identifican por nombre y dirección interna y se solicitan la clave PIN para autorizar la conexión.</p> <p>Si el emparejamiento se realiza con éxito, ambos nodos suelen guardar la identificación del otro y cuando se encuentran cerca se vuelven a vincular sin necesidad de intervención manual.</p> <p>Para manejar los módulos Bluetooth se utilizan los comandos Hayes o AT, de los que puedes encontrar información en este <a href=https://es.wikipedia.org/wiki/Conjunto_de_comandos_Hayes>enlace</a> y a continuación damos algunos básicos:</p> <ul> <li>AT+VERSION: Versión del Firmware. </li> <li>AT+NAMEXXX: Para establecer el nombre que queremos presentar cuando otro dispositivo nos busque.</li> <li>AT+PINXXXX: permite establecer el número de identificación personal, que se requerirá para establecer la vinculación.</li> <li> <p>AT+BAUDX: Permite fijar la velocidad de comunicación entre el modulo y la consola según los siguientes pares:</p> </li> <li> <p>1 -&gt; 1200 bps | -5 -&gt; 19200 bps</p> </li> <li>2 -&gt; 2400 bps | -6 -&gt; 38400 bps</li> <li>3 -&gt; 4800 bps | -7 -&gt; 57600 bps</li> <li>4 -&gt; 9600 bps | -8 -&gt; 115200 bps</li> </ul> <p>La velocidad por defecto es la de 9600 bps.</p> <p>Los módulos mas conocidosson el HC-05 y HC-06 que son Bluetooth V2 y cuyo aspecto podemos ver en la imagen siguiente:</p> <p><center></p> <table> <thead> <tr> <th align=center>Módulos HC-05 y HC-06</th> </tr> </thead> <tbody> <tr> <td align=center><img alt="Módulos HC-05 y HC-06" src=../img/img/Reto-14/hc05-hc06.png></td> </tr> </tbody> </table> <p></center></p> <p>Para poder hacer la comunicación por Bluetooth con nuestra placa Imagina TdR STEAM tenemos que conectar un módulo Bluetooth en el conector de comunicaciones serie. En nuestro caso utilizaremos un módulo HC-06.</p> <h2 id=en-la-tdr-steam><font color=#007575>En la TdR STEAM</font><a class=headerlink href=#en-la-tdr-steam title="Permanent link">&para;</a></h2> <p><center></p> <table> <thead> <tr> <th align=center>El puerto de comunicaciones Rx/Tx en la TdR STEAM</th> </tr> </thead> <tbody> <tr> <td align=center><img alt="El puerto de comunicaciones Rx/Tx en la TdR STEAM" src=../img/img/Reto-14/Rx-Tx-TdR.png></td> </tr> </tbody> </table> <p></center></p> <p>Es muy importante poner el interruptor en la posición adecuada según queramos funcionar en modo Bluetooth o programar la placa UNO. Recordemos que:</p> <ul> <li>Interruptor en posición OFF: para grabar firmware desde ArduinoBlocks.</li> <li>Interruptor en posición ON: modo Bluetooth.</li> </ul> <h2 id=programando-el-reto><font color=#007575>Programando el reto</font><a class=headerlink href=#programando-el-reto title="Permanent link">&para;</a></h2> <p>Vamos a necesitar dos programas para poder trabajar, a saber:</p> <ul> <li>Un programa que haga funcionar la placa UNO con la shield TdR STEAM que programaremos desde ArduinoBlocks.</li> <li>Una aplicación que funcionará en nuestro teléfono móvil que programaremos con AppInventor2.</li> </ul> <h3 id=programa-en-appinventor2><font color=#AA0000>Programa en AppInventor2</font><a class=headerlink href=#programa-en-appinventor2 title="Permanent link">&para;</a></h3> <p>No vamos a entrar en detalles sobre el tema y simplemente expondremos el proceso que seguimos paso a paso. Lo primero que debemos hacer es crear una cuenta, si no la tenemos ya, y loguearnos en MIT App Inventor. Una vez hecho esto procedemos a crear nuestra aplicación tanto en "Designer" como en "Blocks". Este es el paso a paso seguido:</p> <ul> <li><strong>Paso 1</strong>: Configuramos "Designer" para que tenga el aspecto que vemos en la imagen siguiente:</li> </ul> <p><center></p> <table> <thead> <tr> <th align=center>Designer en AppInventor</th> </tr> </thead> <tbody> <tr> <td align=center><img alt="Designer en AppInventor" src=../img/img/Reto-14/Designer.png></td> </tr> </tbody> </table> <p></center></p> <p>Se han colocado un ListPicker, dos botones y un cliente de Bluettoth sobre un nuevo proyecto creado desde la paleta de componentes. El ListPicker se ha renombrado y se ha establecido que su anchura se adapte a su contenedor (Fill parent) y a cada uno de los botones se le ha modificado el texto por defecto para que sea el que se ve en la imagen. El componente BluetoothClient no será visible en la APP.</p> <ul> <li><strong>Paso 2</strong>: Nos cambiamos al modo programación haciendo clic sobre el botón Blocks en la esquina superior derecha. Vamos localizando y configurando los distintos bloques que vemos en la imagen siguiente, que no es otra cosa que la programación de nuestra aplicación para móvil. Como observamos el sistema es totalmente similar al de ArduinoBlocks por lo que no debe resultarnos especialmente difícil localizar los bloques.</li> </ul> <p><center></p> <table> <thead> <tr> <th align=center>Programa por bloques de nuestra APP</th> </tr> </thead> <tbody> <tr> <td align=center><img alt="Programa por bloques de nuestra APP" src=../img/img/Reto-14/Blocks.png></td> </tr> </tbody> </table> <p></center></p> <h3 id=programa-en-arduinoblocks><font color=#AA0000>Programa en ArduinoBlocks</font><a class=headerlink href=#programa-en-arduinoblocks title="Permanent link">&para;</a></h3> <p><strong>Paso 3</strong>: Creamos el programa siguiente en ArduinoBlocks.</p> <p><center></p> <table> <thead> <tr> <th align=center>El programa en ArduinoBlocks del Reto 14</th> </tr> </thead> <tbody> <tr> <td align=center><img alt="El programa en ArduinoBlocks del Reto 14" src=../img/img/Reto-14/AB-Reto-14.png></td> </tr> </tbody> </table> <p></center></p> <h3 id=proceso-de-prueba><font color=#AA0000>Proceso de prueba</font><a class=headerlink href=#proceso-de-prueba title="Permanent link">&para;</a></h3> <p>Una vez tenemos los dos programas preparados continuamos con el paso a paso.</p> <p><strong>Paso 4</strong>: Cargamos el programa de ArduinoBlocks en la placa UNO. Para ello debemos asegurarnos, si tenemos el módulo Bluetooth colocado, de poner el interruptor en la posición OFF o no podremos programar nuestra placa. Muy probablemente la aplicación se quedará colgada y no nos dejará hacer nada obligándonos a reiniciar el equipo.</p> <p><strong>Paso 5</strong>: Instalar la aplicación en el teléfono móvil. En mi caso he ido al menú "Build" y he escogido "Android App (.apk). Tras un proceso que dura unos segundos se nos muestra en pantalla una ventana emergente como la de la imagen siguiente. Podemos escanear el código QR directamente desde el móvil y seguir los pasos de instalación que se nos muestren o descargar desde el botón "Download" y proceder a la instalación.</p> <p><center></p> <table> <thead> <tr> <th align=center>Opciones de descarga de Android App</th> </tr> </thead> <tbody> <tr> <td align=center><img alt="Opciones de descarga de Android App" src=../img/img/Reto-14/Descarga-app.png></td> </tr> </tbody> </table> <p></center></p> <p><strong>Paso 6</strong>: Sincronizar el Bluetooth del móvil con el módulo Bluetooth de la placa UNO. Para ello Conectamos y Abrimos el servicio Bluetooth del móvil y buscamos el nuevo dispositivo. Elegimos el que corresponda a nuestro caso e introducimos la contraseña que normalmente será 1234 aunque opcionalmente puede ser 0000.</p> <p><strong>Paso 7</strong>: Abrimos la aplicación, que en este caso se llama TdR-STEAM. Probar la funcionalidad del botón conectar que inicialmente tendrá las letras de color negro, nos saldrá el dispositivo con el que estamos emparejados, y las letras del botón "Conectar" cambian al color establecido en la programación y a luz del módulo Bluetooth de la placa Imagina TDR STEAM quedará fija (hasta ahora ha estado parpadeando) en el color rojo. Es <strong>MUY IMPORTANTE</strong> comprobar que el <strong>interruptor</strong> ahora está en la posición <strong>ON</strong> en la placa Imagina TdR STEAM.</p> <p>Si pulsamos sobre el botón LED ON se encenderá el LED azul y si pulsamos sobre el botón LED OFF se apagará.</p> <p>El programa de ArduinoBlocks lo tenemos disponible en <a href=http://www.arduinoblocks.com/web/project/638023>Reto-14</a> y el de App Inventor en <a href=../Programas/Reto-14/TdR_STEAM.apk>App-TdR-STEAM</a>.</p> <h2 id=actividad-propuesta><font color=#007575>Actividad propuesta</font><a class=headerlink href=#actividad-propuesta title="Permanent link">&para;</a></h2> <p>Dado que para llevar a buen fin actividades de comunicaciones por Bluetooth son necesarios conocimientos de AppInventor y que estos no son objeto de este tutorial, dejamos libre elección al lector para que el mismo se plantee estas actividades en función de su nivel de conocimiento de creación de Apps.</p> </article> </div> </div> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=Pie> <a href=../R13/ class="md-footer__link md-footer__link--prev" aria-label="Anterior: Reto-13. Termohigrómetro" rel=prev> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </div> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Anterior </span> Reto-13. Termohigrómetro </div> </div> </a> <a href=../R15/ class="md-footer__link md-footer__link--next" aria-label="Siguiente: Reto-15. IoT (WiFi)" rel=next> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Siguiente </span> Reto-15. IoT (WiFi) </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> Copyright &copy; 2022 - 2030 Federico Coca </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "..", "features": [], "translations": {"clipboard.copy": "Copiar al portapapeles", "clipboard.copied": "Copiado al portapapeles", "search.config.lang": "es", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "B\u00fasqueda", "search.result.placeholder": "Teclee para comenzar b\u00fasqueda", "search.result.none": "No se encontraron documentos", "search.result.one": "1 documento encontrado", "search.result.other": "# documentos encontrados", "search.result.more.one": "1 m\u00e1s en esta p\u00e1gina", "search.result.more.other": "# m\u00e1s en esta p\u00e1gina", "search.result.term.missing": "Falta", "select.version.title": "Seleccionar versi\u00f3n"}, "search": "../assets/javascripts/workers/search.22074ed6.min.js"}</script> <script src=../assets/javascripts/bundle.960e086b.min.js></script> <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML"></script> </body> </html>